import{s as et,t as w,d as nt,m as z,c as Q,i as u,e as A,D as it,F as ot,h as S,o as at,f as k,j as X,S as q,k as L,l as O,p as D,g as s,q as rt,r as ct,v as st}from"./index-CiQr15-x.js";function lt(){let t,e="",o=0;for(;o<arguments.length;)(t=arguments[o++])&&typeof t=="string"&&(e&&(e+=" "),e+=t);return e}/**
* @license lucide-solid v0.475.0 - ISC
*
* This source code is licensed under the ISC license.
* See the LICENSE file in the root directory of this source tree.
*/var dt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},J=dt,_t=w("<svg>"),gt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ht=(...t)=>t.filter((e,o,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===o).join(" ").trim(),At=t=>{const[e,o]=et(t,["color","size","strokeWidth","children","class","name","iconNode","absoluteStrokeWidth"]);return(()=>{var a=_t();return nt(a,z(J,{get width(){return e.size??J.width},get height(){return e.size??J.height},get stroke(){return e.color??J.stroke},get"stroke-width"(){return Q(()=>!!e.absoluteStrokeWidth)()?Number(e.strokeWidth??J["stroke-width"])*24/Number(e.size):Number(e.strokeWidth??J["stroke-width"])},get class(){return ht("lucide","lucide-icon",e.name!=null?`lucide-${gt(e?.name)}`:void 0,e.class!=null?e.class:"")}},o),!0,!0),u(a,A(ot,{get each(){return e.iconNode},children:([l,r])=>A(it,z({component:l},r))})),a})()},$=At,ut=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vt=t=>A($,z(t,{name:"Settings",iconNode:ut})),mt=vt,ft=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],St=t=>A($,z(t,{name:"House",iconNode:ft})),Ct=St;const bt="_container_ptlrc_1",Et="_video_ptlrc_22",kt="_chat_ptlrc_32",It="_sidebar_ptlrc_176",Jt="_sidebar__title_ptlrc_183",Qt="_sidebar__items_ptlrc_195",n={container:bt,"container--vertical":"_container--vertical_ptlrc_9","container--vertical-reverse":"_container--vertical-reverse_ptlrc_12","container--horizontal":"_container--horizontal_ptlrc_15","container--horizontal-reverse":"_container--horizontal-reverse_ptlrc_18",video:Et,"video--vertical":"_video--vertical_ptlrc_28",chat:kt,"chat--vertical":"_chat--vertical_ptlrc_38","anon-chat":"_anon-chat_ptlrc_43","anon-chat__area":"_anon-chat__area_ptlrc_56","anon-chat__footer":"_anon-chat__footer_ptlrc_74","anon-chat__buttons":"_anon-chat__buttons_ptlrc_82","anon-chat__button--cog":"_anon-chat__button--cog_ptlrc_88","anon-chat__button--cog__icon":"_anon-chat__button--cog__icon_ptlrc_106","anon-chat__button--submit":"_anon-chat__button--submit_ptlrc_110","anon-chat__hint":"_anon-chat__hint_ptlrc_129","anon-chat__hint--error":"_anon-chat__hint--error_ptlrc_143","modal--config":"_modal--config_ptlrc_147",sidebar:It,sidebar__title:Jt,sidebar__items:Qt,"sidebar__item--selected":"_sidebar__item--selected_ptlrc_204","sidebar__item-icon--selected":"_sidebar__item-icon--selected_ptlrc_228","modal-container":"_modal-container_ptlrc_240","config-section":"_config-section_ptlrc_253","config-section__title":"_config-section__title_ptlrc_256","config-section__header":"_config-section__header_ptlrc_264","config-section__items":"_config-section__items_ptlrc_270","config-section__item":"_config-section__item_ptlrc_270","config-section__item-image":"_config-section__item-image_ptlrc_285","config-section__item-image--selected":"_config-section__item-image--selected_ptlrc_291","config-section__item-label":"_config-section__item-label_ptlrc_302","config-section__item-label--selected":"_config-section__item-label--selected_ptlrc_308","config-section__buttons":"_config-section__buttons_ptlrc_311","config-section__button":"_config-section__button_ptlrc_311"};function wt(t){return new Promise(e=>setTimeout(e,t))}const Bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJIAAABaCAYAAABTwA9XAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAatJREFUeNrt2r1N62AYhuHnpQ9SalZA8gBpqFgACoaAacgQFOcskIomA0TKCqmRyACmSECIH8dB59B81yW5yG/x6JZsS04AAPiohj7s+/4iyW2SyyQTczVpm2SRZF5Vj0eHtI/oPsm5LUmyTnL3XUxDIf1JcpUk2WyS5XJ3PD2ZtAXTaTKb7Y6zs9d3/1bV9bEhPSeZZLNJHh6S1cq4Leq65ObmNaZtVZ1+9bWTgb/YXRMtlyJq2Wq1a+B9E0eGlLeQaNuIBg6H5JqIEQ2cWIl/QUgICSEhJBASQkJICAmEhJAQEkKC/xXSdGql1o1o4HBIs5khWzeigXEhdZ0xW9V1o0Iaema7f3vh4f82T2efH/5PVdXPQ4IDIblrw+0/QkJIICSEhJAQEggJISEkhARCQkgICYSEkBASQgIhISSEhJBASAgJISEkEBJCQkggJISEkBASCAkhISSEBEJCSAgJIYGQEBJCAiEhJISEkEBICAkhIaQk2ZqHsU0MhbSwG2ObGAppnmRtO/bW+ya+VEO/7Pv+IsltksskE1s2ezpbJJlX1aM5AADgl70Ab0BS4CT++pgAAAAASUVORK5CYII=",pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJIAAABaCAYAAABTwA9XAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAapJREFUeNrt1rFNAmEAhuHvt/dGYICLA1ARKxbQ6mbQaXAGK13AylzFAMYBHAEGOAskMUaOEPW44POUQMiX/3/DkQAA8FXpe7PrusskN0nmSc4d17+0TvKU5K6U8nxwSB8RLZJcOEuSvCS53RVTX0gPSa6c3wDe3pK2TZbLZLUax6aqSqbTZDZLJpPtq4+llOtDQ1p5nA0U0f198vo6zn11nTTNNqZ1KaX67mNnPV8hoiG07XgjSjbb2nZvE2du8siWy5PYKKRjG8t/oh9uFBK/QkgICSEhJBASQkJICAmEhJAQEkICISEkhARCQkgICSGBkBASQkJIICSEhJAQEggJISEkEBJCQkgICYSEkBASQgIhISSEhJBASAgJIYGQEBJCQkggJISEkBASCAkhISSEBEJCSAgJhISQEBJCAiEhJISEkBhQVZ3ERiEd23R6Ehv7Qlq75QHMZkldj3dfXW827mmiL6QntzyAySRpmmQ+H9djrqo2m5pms3FPE2XXG13XXSZZJLlw2yR5SXJbSnk+KKRPMd0kmSc5d5b/0vrjl+huV0QAAMAfegc1vUlB9XltHQAAAABJRU5ErkJggg==",yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJIAAABaCAYAAABTwA9XAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAa9JREFUeNrt3T1qAlEYhtH3hrQJWGcLwizAxiqVC3ARuppkEVmDVRoXILgF60BcgCkUMX86YxJIcs+BqRyn+HiYOwMXJgEA4K1y7MfNZjNMMklym+TKuKq0TjJLcl9Keewc0i6iuyR9syTJMsn0s5gujvxxIiIO9HdNdL4jPVvOeLvMlVKuu4a0MTfeBVNK6bq0QWtCQkgICSGBkBASQkJIICSEhJAQEggJISEkEBJCQkgICYSEkBASQgIhISSEhJBASAgJIYGQEBJCQkggJISEkBASCAkhISSEBEJCSAgJhISQEBJCAiEhJP6Ey1ZnrVbJfL49np5MrQa9XjIYbI+bm5Onn/7K9mqVPDwki4Xh1qhpkvF4H9P5X9mez0VUs8Vi28CXn5FaXIR/7ltC8kxEiwa8teH1HyEhJBASQkJICAmEhJAQEkICIfGrQ+r1TKl2LRo4HdJgYJC1a9HAsZDW+4s0jWHWqmkOQ1qfE9IsyXav7nicjEaWudqWs9Ho1X7tfRMfOLb5f5jkLknfVEmyTDItpTx2CukgpkmS2yRXZlml9e5OdP9ZRAAAwA96AaCiTWhGADwYAAAAAElFTkSuQmCC",Rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJIAAABaCAYAAABTwA9XAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAbBJREFUeNrt1j1KxEAAhuFv7FdIvVcQcoBtrKzstMgh9DR6CAu9wFY2OYDgFbYW3APEIiIiZmUFY5Y8D6QaAvPzwkwCAMBXZddg13WnSa6SnCVZ2K5Z2iZZJ7ktpTzuHdJ7RDdJTuwlSZ6TXA/FtCuk+yQXSZLNJmnb/nt5mcayqipZrfpvuXTM43gopVzuG9JrkkU2m+TuLnl6mubS6jppGjGNdM2VUo6/Gzja8VP/Jmrb6UaU9HNrW0c8jsF38tGPvx7CIQnp3/0c0lTeRIc+x9mHBEJCSAgJIYGQEBJCAiEhJISEkEBICAkhISQQEkJCSAgJhISQEBIICSEhJIQEQkJICAkhgZAQEkJCSCAkhISQQEgICSEhJBASQkJICAmEhJAQEkICISEkhARCQkgICSGBkBASQkJIICSEhJAQEggJISEk2Dekqpr+Kg5hjrMPabWa/ioOYY4zDmn7cUh1Pd0V1LWQxrP9TUjrJMlymTRNcn4+rSukqvo5NU0/R8awHhooQwNd150muUlyYv9I8pzkupTyuFdIn2K6SnKWZGEvZ3udrZPcDkUEAAD8oTfCI0lRW0QeZQAAAABJRU5ErkJggg==",Zt="https://vvbj8nuap9.execute-api.ap-northeast-1.amazonaws.com/api";async function Wt(t){return await fetch(`${Zt}/message`,{method:"post",body:JSON.stringify(t)})}const Pt=new Set(["udonkotarou"]),Ut=t=>{switch(t.status){case void 0:return"現在サーバーはアクティブではありません。";case 400:switch(t.message){case"ChatCommandIncluded":return"チャットコマンドを送信することはできません。";case"CooldownRequired":return"発言が多すぎます。しばらく待ってから発言してください。";default:return"不正なリクエストです。"}case 409:return"短期間のうちに同一内容の発言を行うことはできません。";case 429:return"発言が多すぎます。しばらく待ってから発言してください。";case 503:return"発言に失敗しました。少し時間をおいてから再度発言してください。";default:return"サーバーへのアクセスが集中しています。"}},j="ac-chat-config",Xt=()=>{try{const t=window.localStorage.getItem(j);if(!t)throw new Error("ConfigShouldBeInitialized");const e=JSON.parse(t);if(!e.ChatPosition)throw new Error("ConfigShouldBeInitialized");return e}catch(t){return console.error(t),{ChatPosition:"right"}}},Vt=t=>{try{const e=JSON.stringify(t);window.localStorage.setItem(j,e);return}catch{console.error("Chat config is not saved properly.");return}};var Nt=w("<div><div><img alt></div><div>"),Mt=w("<dialog open><div><div>Config</div><div><a><span>基本設定</span></a></div></div><div><section><div>基本設定</div><div>レイアウト</div><div></div><div><button>決定"),tt=w("<section><iframe height=100% width=100%>"),Tt=w("<div><input><div><div></div><div><button></button><button>"),Ft=w("<article>");const Ht=()=>{const[t,e]=S(void 0),o=()=>{e(5),a(4)},a=async l=>{if(l<=0){e(void 0);return}await wt(1e3),e(l),a(l-1)};return[t,o]},K=t=>{const e=()=>t.isSelected;return(()=>{var o=Nt(),a=o.firstChild,l=a.firstChild,r=a.nextSibling;return D(o,"click",t.setSelected,!0),u(r,()=>t.label),k(d=>{var v=n["config-section__item"],_={[n["config-section__item-image"]]:!0,[n["config-section__item-image--selected"]]:e()},g=t.image,f={[n["config-section__item-label"]]:!0,[n["config-section__item-label--selected"]]:e()};return v!==d.e&&s(o,d.e=v),d.t=X(a,_,d.t),g!==d.a&&O(l,"src",d.a=g),d.o=X(r,f,d.o),d},{e:void 0,t:void 0,a:void 0,o:void 0}),o})()},Gt=t=>{const e=()=>t.when,[o,a]=S(),[l,r]=S(t.config.ChatPosition),d=_=>{_.target===o()&&t.closeModal()},v=()=>{t.updateConfig({...t.config,ChatPosition:l()}),t.closeModal()};return rt(()=>{const _=o();_!==void 0&&(e()?_.showModal():_.close())}),(()=>{var _=Mt(),g=_.firstChild,f=g.firstChild,V=f.nextSibling,B=V.firstChild,N=B.firstChild,M=g.nextSibling,T=M.firstChild,F=T.firstChild,H=F.nextSibling,h=H.nextSibling,G=h.nextSibling,m=G.firstChild;return _.$$click=d,ct(a,_),u(B,A(Ct,{get class(){return n["sidebar__item-icon--selected"]}}),N),u(h,A(K,{image:pt,label:"右部",get isSelected(){return l()==="right"},setSelected:()=>r("right")}),null),u(h,A(K,{image:Rt,label:"左部",get isSelected(){return l()==="left"},setSelected:()=>r("left")}),null),u(h,A(K,{image:Bt,label:"上部",get isSelected(){return l()==="top"},setSelected:()=>r("top")}),null),u(h,A(K,{image:yt,label:"下部",get isSelected(){return l()==="bottom"},setSelected:()=>r("bottom")}),null),m.$$click=v,k(i=>{var C=n["modal--config"],I=n.sidebar,p=n.sidebar__title,b=n.sidebar__items,E=n["sidebar__item--selected"],c=n["modal-container"],y=n["config-section"],R=n["config-section__title"],Z=n["config-section__header"],W=n["config-section__items"],P=n["config-section__buttons"],U=n["config-section__button"];return C!==i.e&&s(_,i.e=C),I!==i.t&&s(g,i.t=I),p!==i.a&&s(f,i.a=p),b!==i.o&&s(V,i.o=b),E!==i.i&&s(B,i.i=E),c!==i.n&&s(M,i.n=c),y!==i.s&&s(T,i.s=y),R!==i.h&&s(F,i.h=R),Z!==i.r&&s(H,i.r=Z),W!==i.d&&s(h,i.d=W),P!==i.l&&s(G,i.l=P),U!==i.u&&s(m,i.u=U),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),_})()},Kt=t=>{const e=L(),o=()=>t.config;return(()=>{var a=tt(),l=a.firstChild;return k(r=>{var d={[n.video]:!0,[n["video--vertical"]]:o().ChatPosition==="top"||o().ChatPosition==="bottom"},v=`https://player.twitch.tv/?channel=${e.id}&parent=${encodeURI(window.location.hostname)}`;return r.e=X(a,d,r.e),v!==r.t&&O(l,"src",r.t=v),r},{e:void 0,t:void 0}),a})()},zt=t=>{const e=L(),[o,a]=S(""),[l,r]=S(!1),[d,v]=S(void 0),[_,g]=Ht(),f=()=>t.config,V=Q(()=>Pt.has(e.id)),B=Q(()=>o().length>140),N=Q(()=>!(l()||_()!==void 0||o().length>140||o().length==0)),M=Q(()=>d()!==void 0?d():`${o().length} / 140`),T=Q(()=>_()!==void 0?_()??"":"送信"),F=h=>{d()!==void 0&&v(void 0),a(h.target.value)},H=async()=>{N()&&(r(!0),await Wt({message:o()}).then(()=>{a(""),g()}).catch(h=>{v(Ut(h))}),r(!1))};return(()=>{var h=tt(),G=h.firstChild;return u(h,A(q,{get when(){return V()},get children(){var m=Tt(),i=m.firstChild,C=i.nextSibling,I=C.firstChild,p=I.nextSibling,b=p.firstChild,E=b.nextSibling;return i.$$input=F,u(I,M),D(b,"click",t.openModal,!0),u(b,A(mt,{get class(){return n["anon-chat__button--cog__icon"]}})),E.$$click=H,u(E,T),k(c=>{var y=n["anon-chat"],R=n["anon-chat__area"],Z=n["anon-chat__footer"],W=lt(n["anon-chat__hint"],B()&&n["anon-chat__hint--error"]),P=n["anon-chat__buttons"],U=n["anon-chat__button--cog"],Y=n["anon-chat__button--submit"],x=!N();return y!==c.e&&s(m,c.e=y),R!==c.t&&s(i,c.t=R),Z!==c.a&&s(C,c.a=Z),W!==c.o&&s(I,c.o=W),P!==c.i&&s(p,c.i=P),U!==c.n&&s(b,c.n=U),Y!==c.s&&s(E,c.s=Y),x!==c.h&&(E.disabled=c.h=x),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),k(()=>i.value=o()),m}}),null),k(m=>{var i={[n.chat]:!0,[n["chat--vertical"]]:f().ChatPosition==="top"||f().ChatPosition==="bottom"},C=`https://www.twitch.tv/embed/${e.id}/chat?parent=${encodeURI(window.location.hostname)}`;return m.e=X(h,i,m.e),C!==m.t&&O(G,"src",m.t=C),m},{e:void 0,t:void 0}),h})()},Yt=()=>{const[t,e]=S({ChatPosition:"right"}),[o,a]=S(!0),[l,r]=S(!1),d=()=>{r(!0)},v=()=>{r(!1)},_=g=>{e(g),Vt(g)};return at(()=>{const g=Xt();e(g),a(!1)}),A(q,{get when(){return!o()},get children(){var g=Ft();return u(g,A(Kt,{get config(){return t()}}),null),u(g,A(zt,{get config(){return t()},openModal:d}),null),u(g,A(Gt,{get when(){return l()},get config(){return t()},updateConfig:_,closeModal:v}),null),k(f=>X(g,{[n.container]:!0,[n["container--vertical"]]:t().ChatPosition==="bottom",[n["container--vertical-reverse"]]:t().ChatPosition==="top",[n["container--horizontal"]]:t().ChatPosition==="right",[n["container--horizontal-reverse"]]:t().ChatPosition==="left"},f)),g}})};st(["click","input"]);export{Yt as Id,Yt as default};
